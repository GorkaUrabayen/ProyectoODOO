<odoo>
    <data>
        <!-- Menú principal -->
        <menuitem id="menu_gestion_mazmorras" name="Gestión de Mazmorras" sequence="1"/>

        <!-- Modificación de la vista original de clientes (res.partner) -->
        <record id="view_partner_form_inherit_mazmorras" model="ir.ui.view">
            <field name="name">cliente.form.inherit.mazmorras</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form//sheet//group[last()]" position="after">
                    <group>
                        <field name="es_rescatador" widget="boolean_toggle" string="¿Rescatador de Princesas?"/>
                    </group>
                </xpath>
            </field>
        </record>

        <!-- Acción para abrir la vista de clientes personalizada -->
        <record id="action_clientes_mazmorras" model="ir.actions.act_window">
            <field name="name">Clientes</field>
            <field name="res_model">res.partner</field>
            <field name="view_mode">form,list</field>
        </record>

        <!-- Submenú para clientes -->
        <menuitem id="menu_clientes_mazmorras" name="Clientes" parent="menu_gestion_mazmorras" sequence="2" action="action_clientes_mazmorras"/>

        <!-- Vista moderna de lista de clientes -->
        <record id="view_cliente_list_mazmorras" model="ir.ui.view">
            <field name="name">cliente.list.mazmorras</field>
            <field name="model">res.partner</field>
            <field name="type">list</field>
            <field name="arch" type="xml">
                <list string="Lista de Clientes">
                    <field name="name" string="Nombre"/>
                    <field name="email" string="Correo"/>
                    <field name="phone" string="Teléfono"/>
                    <field name="es_rescatador" widget="boolean_toggle" string="¿Rescatador?"/>
                </list>
            </field>
        </record>

        <!-- Acción para abrir la vista de lista de clientes -->
        <record id="action_clientes_lista_mazmorras" model="ir.actions.act_window">
            <field name="name">Lista de Clientes</field>
            <field name="res_model">res.partner</field>
            <field name="view_mode">list,form</field>
        </record>

        <!-- Menú para acceder a la lista de clientes -->
        <menuitem id="menu_clientes_lista_mazmorras" name="Lista de Clientes" parent="menu_clientes_mazmorras" sequence="3" action="action_clientes_lista_mazmorras"/>
    </data>
</odoo>
